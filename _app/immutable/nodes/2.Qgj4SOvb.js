import{t as X,a as H,c as H0,n as I0}from"../chunks/CJqmyOfN.js";import"../chunks/B6IEayvM.js";import{_ as y0,b as z0,s as t0,h as x,Q as B0,a as P0,v as r,a2 as G0,c as J0,r as p0,d as n0,g as U,T as V0,e as M0,f as S0,p as Y0,a3 as i0,Y as C0,K as g0,a4 as _0,a5 as Z0,a6 as w0,a7 as v0,a8 as q0,X as K0,a9 as U0,j as X0,aa as c0,ab as F0,R as Q0,O as $0,ac as k0,M as W0,ad as j0,z as rr,ae as y,af as er,u as ar,C as D,F as z,A as o0,B as tr,ag as A,ah as nr,ai as ir,D as S,k as or}from"../chunks/Boh_yuZ0.js";import{d as lr,e as fr,s as sr}from"../chunks/XGFaxKmG.js";import{i as l0}from"../chunks/DqGP5nue.js";function f0(o,t){return t}function ur(o,t,a,n){for(var l=[],e=t.length,s=0;s<e;s++)q0(t[s].e,l,!0);var v=e>0&&l.length===0&&a!==null;if(v){var g=a.parentNode;K0(g),g.append(a),n.clear(),B(o,t[0].prev,t[e-1].next)}U0(l,()=>{for(var h=0;h<e;h++){var _=t[h];v||(n.delete(_.k),B(o,_.prev,_.next)),X0(_.e,!v)}})}function s0(o,t,a,n,l,e=null){var s=o,v={flags:t,items:new Map,first:null},g=(t&k0)!==0;if(g){var h=o;s=x?t0(B0(h)):h.appendChild(y0())}x&&P0();var _=null,C=!1,d=G0(()=>{var m=a();return $0(m)?m:m==null?[]:C0(m)});z0(()=>{var m=r(d),f=m.length;if(C&&f===0)return;C=f===0;let O=!1;if(x){var I=s.data===J0;I!==(f===0)&&(s=p0(),t0(s),n0(!1),O=!0)}if(x){for(var E=null,M,T=0;T<f;T++){if(U.nodeType===8&&U.data===V0){s=U,O=!0,n0(!1);break}var c=m[T],w=n(c,T);M=R0(U,v,E,null,c,w,T,l,t,a),v.items.set(w,M),E=M}f>0&&t0(p0())}x||vr(m,v,s,l,t,n,a),e!==null&&(f===0?_?M0(_):_=S0(()=>e(s)):_!==null&&Y0(_,()=>{_=null})),O&&n0(!0),r(d)}),x&&(s=U)}function vr(o,t,a,n,l,e,s){var $,W,V,j;var v=(l&j0)!==0,g=(l&(c0|v0))!==0,h=o.length,_=t.items,C=t.first,d=C,m,f=null,O,I=[],E=[],M,T,c,w;if(v)for(w=0;w<h;w+=1)M=o[w],T=e(M,w),c=_.get(T),c!==void 0&&(($=c.a)==null||$.measure(),(O??(O=new Set)).add(c));for(w=0;w<h;w+=1){if(M=o[w],T=e(M,w),c=_.get(T),c===void 0){var P=d?d.e.nodes_start:a;f=R0(P,t,f,f===null?t.first:f.next,M,T,w,n,l,s),_.set(T,f),I=[],E=[],d=f.next;continue}if(g&&cr(c,M,w,l),(c.e.f&i0)!==0&&(M0(c.e),v&&((W=c.a)==null||W.unfix(),(O??(O=new Set)).delete(c))),c!==d){if(m!==void 0&&m.has(c)){if(I.length<E.length){var N=E[0],k;f=N.prev;var F=I[0],J=I[I.length-1];for(k=0;k<I.length;k+=1)m0(I[k],N,a);for(k=0;k<E.length;k+=1)m.delete(E[k]);B(t,F.prev,J.next),B(t,f,F),B(t,J,N),d=N,f=J,w-=1,I=[],E=[]}else m.delete(c),m0(c,d,a),B(t,c.prev,c.next),B(t,c,f===null?t.first:f.next),B(t,f,c),f=c;continue}for(I=[],E=[];d!==null&&d.k!==T;)(d.e.f&i0)===0&&(m??(m=new Set)).add(d),E.push(d),d=d.next;if(d===null)continue;c=d}I.push(c),f=c,d=c.next}if(d!==null||m!==void 0){for(var L=m===void 0?[]:C0(m);d!==null;)(d.e.f&i0)===0&&L.push(d),d=d.next;var G=L.length;if(G>0){var Q=(l&k0)!==0&&h===0?a:null;if(v){for(w=0;w<G;w+=1)(V=L[w].a)==null||V.measure();for(w=0;w<G;w+=1)(j=L[w].a)==null||j.fix()}ur(t,L,Q,_)}}v&&W0(()=>{var Z;if(O!==void 0)for(c of O)(Z=c.a)==null||Z.apply()}),g0.first=t.first&&t.first.e,g0.last=f&&f.e}function cr(o,t,a,n){(n&c0)!==0&&_0(o.v,t),(n&v0)!==0?_0(o.i,a):o.i=a}function R0(o,t,a,n,l,e,s,v,g,h){var _=(g&c0)!==0,C=(g&F0)===0,d=_?C?Z0(l):w0(l):l,m=(g&v0)===0?s:w0(s),f={i:m,v:d,k:e,a:null,e:null,prev:a,next:n};try{return f.e=S0(()=>v(o,d,m,h),x),f.e.prev=a&&a.e,f.e.next=n&&n.e,a===null?t.first=f:(a.next=f,a.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function m0(o,t,a){for(var n=o.next?o.next.e.nodes_start:a,l=t?t.e.nodes_start:a,e=o.e.nodes_start;e!==n;){var s=Q0(e);l.before(e),e=s}}function B(o,t,a){t===null?o.first=a:(t.next=a,t.e.next=a&&a.e),a!==null&&(a.prev=t,a.e.prev=t&&t.e)}const b0=[...` 	
\r\f \v\uFEFF`];function dr(o,t,a){var n=o==null?"":""+o;if(a){for(var l in a)if(a[l])n=n?n+" "+l:l;else if(n.length)for(var e=l.length,s=0;(s=n.indexOf(l,s))>=0;){var v=s+e;(s===0||b0.includes(n[s-1]))&&(v===n.length||b0.includes(n[v]))?n=(s===0?"":n.substring(0,s))+n.substring(v+1):s=v}}return n===""?null:n}function A0(o,t=!1){var a=t?" !important;":";",n="";for(var l in o){var e=o[l];e!=null&&e!==""&&(n+=" "+l+": "+e+a)}return n}function hr(o,t){if(t){var a="",n,l;return Array.isArray(t)?(n=t[0],l=t[1]):n=t,n&&(a+=A0(n)),l&&(a+=A0(l,!0)),a=a.trim(),a===""?null:a}return String(o)}function T0(o,t,a,n,l,e){var s=o.__className;if(x||s!==a||s===void 0){var v=dr(a,n,e);(!x||v!==o.getAttribute("class"))&&(v==null?o.removeAttribute("class"):o.className=v),o.__className=a}else if(e&&l!==e)for(var g in e){var h=!!e[g];(l==null||h!==!!l[g])&&o.classList.toggle(g,h)}return e}function u0(o,t={},a,n){for(var l in a){var e=a[l];t[l]!==e&&(a[l]==null?o.style.removeProperty(l):o.style.setProperty(l,e,n))}}function E0(o,t,a,n){var l=o.__style;if(x||l!==t){var e=hr(t,n);(!x||e!==o.getAttribute("style"))&&(e==null?o.removeAttribute("style"):o.style.cssText=e),o.__style=t}else n&&(Array.isArray(n)?(u0(o,a==null?void 0:a[0],n[0]),u0(o,a==null?void 0:a[1],n[1],"important")):u0(o,a,n));return n}const pr=!0,gr=!0,Or=Object.freeze(Object.defineProperty({__proto__:null,prerender:gr,ssr:pr},Symbol.toStringTag,{value:"Module"}));function _r(o,t,a){r(t)||A(a,!r(a))}var wr=X('<div class="game-over-overlay"><div class="game-over"><h1>Game Over</h1> <button class="neon-button">Play Again</button></div></div>'),mr=X("<div></div>"),br=I0('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M8 5v14l11-7z"></path></svg>'),Ar=I0('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M6 4h4v16H6zm8 0h4v16h-4z"></path></svg>'),Tr=X("<div></div>"),Er=X('<div class="row"></div>'),Ir=X('<div class="container"><h2 class="title">Tetris</h2> <!> <div class="game-area"><div class="side"><div class="next-piece"><h3>Next:</h3> <div class="next-grid"><!></div></div> <p class="score"> </p> <div class="controls"><p>Controls:</p> <p>← → Move | ↑ Rotate</p> <p>Space Drop | ↓ Move down</p></div> <div class="buttons"><button class="restart neon-button" aria-label="Restart Game"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M13.5 2c-5.621 0-10.211 4.443-10.475 10h-3.025l5 6.625 5-6.625h-2.975c.257-3.351 3.06-6 6.475-6 3.584 0 6.5 2.916 6.5 6.5s-2.916 6.5-6.5 6.5c-1.863 0-3.542-.793-4.728-2.053l-2.427 3.216c1.877 1.754 4.389 2.837 7.155 2.837 5.79 0 10.5-4.71 10.5-10.5s-4.71-10.5-10.5-10.5z"></path></svg></button> <button class="neon-button"><!></button></div></div> <div class="grid"></div></div></div>');function Mr(o,t){rr(t,!0);const a={I:[[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0],[0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0]],O:[[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0]],T:[[0,0,0,0,0,1,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,1,0,0,1,0,0],[0,0,0,0,0,0,0,0,1,1,1,0,0,1,0,0],[0,0,0,0,0,1,0,0,1,1,0,0,0,1,0,0]],S:[[0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,1,0,0,0,1,0],[0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,0,1,1,0,0,0,1,0,0]],Z:[[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,1,1,0,0,1,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,1,1,0,0,1,0,0,0]],J:[[0,0,0,0,1,0,0,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,1,1,1,0,0,0,1,0],[0,0,0,0,0,1,0,0,0,1,0,0,1,1,0,0]],L:[[0,0,0,0,0,0,1,0,1,1,1,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,1,1,0],[0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0],[0,0,0,0,1,1,0,0,0,1,0,0,0,1,0,0]]},n={I:"cyan",O:"yellow",T:"purple",S:"green",Z:"red",J:"blue",L:"orange"};let l=y(er(Array(20).fill(0).map(()=>Array(10).fill(0)))),e=y(null),s=y(null),v=y(0),g=y(!1),h=y(!1),_=y(0),C=y(1);function d(){const i=["I","O","T","S","Z","J","L"];return i[Math.floor(Math.random()*i.length)]}function m(){const i=d();return{type:i,rotation:0,row:0,col:3,shape:a[i][0],color:n[i]}}function f(i){if(!i)return!1;for(let p=0;p<16;p++){const u=i.col+p%4,b=i.row+Math.floor(p/4);if(i.shape[p]&&(u<0||u>=10||b>=20||b>=0&&r(l)[b][u]))return!1}return!0}function O(){if(r(g)||r(h)||!r(e))return;const i={...r(e),col:r(e).col-1};f(i)&&A(e,i,!0)}function I(){if(r(g)||r(h)||!r(e))return;const i={...r(e),col:r(e).col+1};f(i)&&A(e,i,!0)}function E(){if(r(g)||r(h)||!r(e))return;const i={...r(e),row:r(e).row+1};f(i)?A(e,i,!0):T()}function M(){if(r(g)||r(h)||!r(e))return;const i=(r(e).rotation+1)%4,p=a[r(e).type][i];let u={...r(e),rotation:i,shape:p};const b=[-1,1,-2,2];for(const R of b){if(u.col+=R,f(u)){A(e,u,!0);return}u.col-=R}}function T(){const i=r(l).map(u=>[...u]);if(!r(e))return;for(let u=0;u<16;u++){const b=r(e).col+u%4,R=r(e).row+Math.floor(u/4);r(e).shape[u]&&R>=0&&b>=0&&b<10&&R<20&&(i[R][b]=r(e).color)}const p=[];for(let u=0;u<20;u++)i[u].every(b=>b)&&p.push(u);if(p.length>0){for(const b of p)i.splice(b,1),i.unshift(Array(10).fill(0));const u=Math.floor(r(v)/1e3)+1;switch(p.length){case 1:A(v,r(v)+100*u);break;case 2:A(v,r(v)+300*u);break;case 3:A(v,r(v)+500*u);break;case 4:A(v,r(v)+800*u);break}r(v)>=r(C)*1e3&&(nr(C),clearInterval(r(_)),A(_,setInterval(()=>{!r(g)&&!r(h)&&E()},Math.max(1e3-(r(C)-1)*100,100)),!0))}A(l,i,!0),A(e,r(s)||m(),!0),A(s,m(),!0),f(r(e))||(A(g,!0),r(_)&&clearInterval(r(_)))}function c(i,p){if(r(e)&&!r(g)){const u=p-r(e).col,b=i-r(e).row;if(u>=0&&u<4&&b>=0&&b<4){const R=b*4+u;if(r(e).shape[R])return r(e).color}}return r(l)[i][p]||"transparent"}function w(i){if(i.key==="Escape"){A(h,!r(h));return}if(i.key==="Enter"){P();return}if(i.key==="r"){P();return}if(!r(h)&&!r(g)){switch(i.key){case"ArrowLeft":O();break;case"ArrowRight":I();break;case"ArrowDown":E();break;case"ArrowUp":M();break;case" ":for(;r(e)&&f({...r(e),row:r(e).row+1});)A(e,{...r(e),row:r(e).row+1},!0);T();break}i.preventDefault()}}function P(){r(_)&&clearInterval(r(_)),A(h,!1),A(l,Array(20).fill(0).map(()=>Array(10).fill(0)),!0),A(e,m(),!0),A(s,m(),!0),A(v,0),A(g,!1),A(h,!1),A(C,1),A(_,setInterval(()=>{!r(g)&&!r(h)&&E()},1e3),!0)}P(),ar(()=>()=>clearInterval(r(_)));var N=Ir();fr("keydown",ir,w);var k=z(D(N),2);{var F=i=>{var p=wr(),u=D(p),b=z(D(u),2);b.__click=P,S(u),S(p),H(i,p)};l0(k,i=>{r(g)&&i(F)})}var J=z(k,2),L=D(J),G=D(L),Q=z(D(G),2),$=D(Q);{var W=i=>{var p=H0(),u=or(p);s0(u,16,()=>Array(16),f0,(b,R,r0)=>{var q=mr();let Y,K;o0(e0=>{Y=T0(q,1,"next-cell",null,Y,e0),K=E0(q,"",K,{"background-color":r(s).shape[r0]?r(s).color:"transparent"})},[()=>({active:r(s).shape[r0]})]),H(b,q)}),H(i,p)};l0($,i=>{r(s)&&i(W)})}S(Q),S(G);var V=z(G,2),j=D(V);S(V);var Z=z(V,4),d0=D(Z);d0.__click=P;var a0=z(d0,2);a0.__click=[_r,g,h];var x0=D(a0);{var O0=i=>{var p=br();H(i,p)},D0=i=>{var p=Ar();H(i,p)};l0(x0,i=>{r(h)?i(O0):i(D0,!1)})}S(a0),S(Z),S(L);var h0=z(L,2);s0(h0,21,()=>r(l),f0,(i,p,u)=>{var b=Er();s0(b,21,()=>r(p),f0,(R,r0,q)=>{var Y=Tr();let K,e0;o0((L0,N0)=>{K=T0(Y,1,"cell",null,K,L0),e0=E0(Y,"",e0,{"background-color":N0})},[()=>({active:r(r0)!==null}),()=>c(u,q)]),H(R,Y)}),S(b),H(i,b)}),S(h0),S(J),S(N),o0(()=>sr(j,`Score: ${r(v)??""}`)),H(o,N),tr()}lr(["click"]);function Dr(o){Mr(o,{})}export{Dr as component,Or as universal};
